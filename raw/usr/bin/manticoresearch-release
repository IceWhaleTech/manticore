#!/bin/bash

declare -A distr
distr[4]=buster
distr[8]=jessie
distr[9]=stretch
distr[10]=buster
distr[11]=bullseye
distr[12]=bookworm
distr[14]=trusty
distr[16]=xenial
distr[18]=bionic
distr[19]=bionic
distr[20]=focal
distr[21]=focal
distr[22]=jammy
distr[24]=jammy # should be noble

. /etc/os-release

if [[ -z $VERSION_ID && "$VERSION_CODENAME" == "bookworm" ]]; then
    ID=12
  elif [[ -n $ID && "$ID" == "linuxmint" ]]; then # Mint Linux support
    if [ -n "$DEBIAN_CODENAME" ]; then
      distr["linuxmint"]=$DEBIAN_CODENAME
    else
      distr["linuxmint"]=$UBUNTU_CODENAME
    fi
  else
    ID=$(echo $VERSION_ID | cut -f1 -d.)
fi

echo "deb http://repo.manticoresearch.com/repository/manticoresearch_${distr[$ID]} ${distr[$ID]} main" > /etc/apt/sources.list.d/manticoresearch.list
